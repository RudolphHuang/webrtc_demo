(function(){"use strict";var e={8291:function(e,t,a){var n=a(5130),o=a(6768);function r(e,t){const a=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(a)}var i=a(1241);const c={},l=(0,i.A)(c,[["render",r]]);var s=l,u=a(1387);const d={class:"videos"},p={id:"webcamVideo",ref:"webcamVideo",autoplay:"",playsinline:""},v={id:"remoteVideo",ref:"remoteVideo",autoplay:"",playsinline:""},h=["disabled"],f={id:"callInput",ref:"callInput"},b=["disabled"],m=["disabled"];function g(e,t,a,n,r,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[6]||(t[6]=(0,o.Lk)("h2",null,"1. Start your Webcam",-1)),(0,o.Lk)("div",d,[(0,o.Lk)("span",null,[t[4]||(t[4]=(0,o.Lk)("h3",null,"Local Stream",-1)),(0,o.Lk)("video",p,null,512)]),(0,o.Lk)("span",null,[t[5]||(t[5]=(0,o.Lk)("h3",null,"Remote Stream",-1)),(0,o.Lk)("video",v,null,512)])]),(0,o.Lk)("button",{id:"webcamButton",onClick:t[0]||(t[0]=(...e)=>i.start&&i.start(...e))},"Start webcam"),t[7]||(t[7]=(0,o.Lk)("h2",null,"2. Create a new Call",-1)),(0,o.Lk)("button",{id:"callButton",onClick:t[1]||(t[1]=(...e)=>i.create&&i.create(...e)),disabled:e.callButtonDisabled},"Create Call (offer)",8,h),t[8]||(t[8]=(0,o.Lk)("h2",null,"3. Join a Call",-1)),t[9]||(t[9]=(0,o.Lk)("p",null,"Answer the call from a different browser window or device",-1)),(0,o.Lk)("input",f,null,512),(0,o.Lk)("button",{id:"answerButton",onClick:t[2]||(t[2]=(...e)=>i.join&&i.join(...e)),disabled:e.answerButtonDisabled},"Answer",8,b),t[10]||(t[10]=(0,o.Lk)("h2",null,"4. Hangup",-1)),(0,o.Lk)("button",{id:"hangupButton",onClick:t[3]||(t[3]=(...e)=>i.hangup&&i.hangup(...e)),disabled:e.hangButtonDisabled},"Hangup",8,m)],64)}a(8111),a(7588);var w=a(4232);const k={class:"hello"};function y(e,t,a,n,r,i){return(0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("h1",null,(0,w.v_)(a.msg),1),t[0]||(t[0]=(0,o.Fv)('<p data-v-1935ec24> For a guide and recipes on how to configure / customize this project,<br data-v-1935ec24> check out the <a href="https://cli.vuejs.org" target="_blank" rel="noopener" data-v-1935ec24>vue-cli documentation</a>. </p><h3 data-v-1935ec24>Installed CLI Plugins</h3><ul data-v-1935ec24><li data-v-1935ec24><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel" target="_blank" rel="noopener" data-v-1935ec24>babel</a></li><li data-v-1935ec24><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-router" target="_blank" rel="noopener" data-v-1935ec24>router</a></li><li data-v-1935ec24><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-vuex" target="_blank" rel="noopener" data-v-1935ec24>vuex</a></li></ul><h3 data-v-1935ec24>Essential Links</h3><ul data-v-1935ec24><li data-v-1935ec24><a href="https://vuejs.org" target="_blank" rel="noopener" data-v-1935ec24>Core Docs</a></li><li data-v-1935ec24><a href="https://forum.vuejs.org" target="_blank" rel="noopener" data-v-1935ec24>Forum</a></li><li data-v-1935ec24><a href="https://chat.vuejs.org" target="_blank" rel="noopener" data-v-1935ec24>Community Chat</a></li><li data-v-1935ec24><a href="https://twitter.com/vuejs" target="_blank" rel="noopener" data-v-1935ec24>Twitter</a></li><li data-v-1935ec24><a href="https://news.vuejs.org" target="_blank" rel="noopener" data-v-1935ec24>News</a></li></ul><h3 data-v-1935ec24>Ecosystem</h3><ul data-v-1935ec24><li data-v-1935ec24><a href="https://router.vuejs.org" target="_blank" rel="noopener" data-v-1935ec24>vue-router</a></li><li data-v-1935ec24><a href="https://vuex.vuejs.org" target="_blank" rel="noopener" data-v-1935ec24>vuex</a></li><li data-v-1935ec24><a href="https://github.com/vuejs/vue-devtools#vue-devtools" target="_blank" rel="noopener" data-v-1935ec24>vue-devtools</a></li><li data-v-1935ec24><a href="https://vue-loader.vuejs.org" target="_blank" rel="noopener" data-v-1935ec24>vue-loader</a></li><li data-v-1935ec24><a href="https://github.com/vuejs/awesome-vue" target="_blank" rel="noopener" data-v-1935ec24>awesome-vue</a></li></ul>',7))])}var C={name:"HelloWorld",props:{msg:String}};const j=(0,i.A)(C,[["render",y],["__scopeId","data-v-1935ec24"]]);var S=j,L=a(2829);a(1496);const D={projectId:"test-c203e"},_=(L.A.initializeApp(D),L.A.firestore()),O={iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10};var B={name:"HomeView",components:{HelloWorld:S},data:()=>({localStream:null,remoteStream:null,callButtonDisabled:!1,answerButtonDisabled:!1,webcamButtonDisabled:!1,hangButtonDisabled:!1,pc:new RTCPeerConnection(O)}),methods:{async start(){console.log("webcamButton"),this.localStream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),this.remoteStream=new MediaStream,this.localStream.getTracks().forEach(e=>{this.pc.addTrack(e,this.localStream)}),this.pc.ontrack=e=>{e.streams[0].getTracks().forEach(e=>{this.remoteStream.addTrack(e)})},this.$refs.webcamVideo.srcObject=this.localStream,this.$refs.remoteVideo.srcObject=this.remoteStream,this.callButtonDisabled=!1,this.answerButtonDisabled=!1,this.webcamButtonDisabled=!0},async create(){const e=_.collection("calls").doc(),t=e.collection("offerCandidates"),a=e.collection("answerCandidates");console.log("callDoc",e),this.$refs.callInput.value=e.id,this.pc.onicecandidate=e=>{e.candidate&&t.add(e.candidate.toJSON())};const n=await this.pc.createOffer();await this.pc.setLocalDescription(n);const o={sdp:n.sdp,type:n.type};await e.set({offer:o}),e.onSnapshot(e=>{const t=e.data();if(!this.pc.currentRemoteDescription&&t?.answer){const e=new RTCSessionDescription(t.answer);this.pc.setRemoteDescription(e)}}),a.onSnapshot(e=>{e.docChanges().forEach(e=>{if("added"===e.type){const t=new RTCIceCandidate(e.doc.data());this.pc.addIceCandidate(t)}})}),this.hangButtonDisabled=!1},async join(){const e=this.$refs.callInput.value,t=_.collection("calls").doc(e),a=t.collection("answerCandidates"),n=t.collection("offerCandidates");this.pc.onicecandidate=e=>{e.candidate&&a.add(e.candidate.toJSON())};const o=(await t.get()).data(),r=o.offer;await this.pc.setRemoteDescription(new RTCSessionDescription(r));const i=await this.pc.createAnswer();await this.pc.setLocalDescription(i);const c={type:i.type,sdp:i.sdp};await t.update({answer:c}),n.onSnapshot(e=>{e.docChanges().forEach(e=>{if(console.log(e),"added"===e.type){let t=e.doc.data();this.pc.addIceCandidate(new RTCIceCandidate(t))}})})},async hangup(){}}};const T=(0,i.A)(B,[["render",g]]);var E=T;const A=[{path:"/",name:"home",component:E},{path:"/about",name:"about",component:()=>a.e(594).then(a.bind(a,603))}],I=(0,u.aE)({history:(0,u.LA)("/"),routes:A});var x=I,P=a(782),R=(0,P.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,n.Ef)(s).use(R).use(x).mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,r){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],r=e[u][2];for(var c=!0,l=0;l<n.length;l++)(!1&r||i>=r)&&Object.keys(a.O).every(function(e){return a.O[e](n[l])})?n.splice(l--,1):(c=!1,r<i&&(i=r));if(c){e.splice(u--,1);var s=o();void 0!==s&&(t=s)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce(function(t,n){return a.f[n](e,t),t},[]))}}(),function(){a.u=function(e){return"js/about.ab45cbd0.js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="untitled10:";a.l=function(n,o,r,i){if(e[n])e[n].push(o);else{var c,l;if(void 0!==r)for(var s=document.getElementsByTagName("script"),u=0;u<s.length;u++){var d=s[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+r){c=d;break}}c||(l=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.setAttribute("data-webpack",t+r),c.src=n),e[n]=[o];var p=function(t,a){c.onerror=c.onload=null,clearTimeout(v);var o=e[n];if(delete e[n],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach(function(e){return e(a)}),t)return t(a)},v=setTimeout(p.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=p.bind(null,c.onerror),c.onload=p.bind(null,c.onload),l&&document.head.appendChild(c)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={524:0};a.f.j=function(t,n){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise(function(a,n){o=e[t]=[a,n]});n.push(o[2]=r);var i=a.p+a.u(t),c=new Error,l=function(n){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;c.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,o[1](c)}};a.l(i,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,i=n[0],c=n[1],l=n[2],s=0;if(i.some(function(t){return 0!==e[t]})){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(l)var u=l(a)}for(t&&t(n);s<i.length;s++)r=i[s],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},n=self["webpackChunkuntitled10"]=self["webpackChunkuntitled10"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],function(){return a(8291)});n=a.O(n)})();
//# sourceMappingURL=app.76bf66ec.js.map